# Второй пилот — не капитан

В начале книги мы уже говорили: код читают чаще, чем пишут.
Сегодня у нас появился второй пилот — только теперь он не сидит рядом на соседнем кресле, а встроен прямо в редактор.
ChatGPT, Copilot и другие LLM-инструменты. Быстрые, дружелюбные, полезные.
Но не обманывайтесь: это всё ещё второй пилот, не капитан

Обычно код не меняют просто так.
Чаще всего причина — баг или новая фича.
И мы формулируем задачу примерно так:

> «Иногда этот код выбрасывает исключение XXX. Исправь, пожалуйста».

~~Обычно мы не меняем код без причины, самыми популярными являются исправление ошибки и добавление новых функций.
По этому мы ставим задачу второму пилоту в духе: "Этот код иногда выдает Exception XXXX" пожалуйста исправь".~~

Но именно в таких формулировках и кроется проблема.

Если передать ему метод на 800 строк, полных противоречий, логических дыр и нелепых зависимостей — не надейся,
что он сделает из этого конфетку. 
Он будет **продолжать**. Механически, без разбора.
Потому что его задача — **продолжить твой стиль**, а не **исправить твой хаос**.
Старое правило `GIGO — *Garbage In, Garbage Out*.` никуда не делось.


Рассмотрим простой пример: функция, которая записывает email в базу и отправляет приветственное письмо.
Попросим второго пилота добавить логирование:

```diff
// >_ Добавь логирование

function store()
{
    $email = $_POST['email'];

    $conn = new mysqli('localhost', 'user', 'pass', 'db');
    $conn->query("INSERT INTO users (email) VALUES ('$email')");

    mail($email, 'Hi', 'Welcome!');

+    file_put_contents('log.txt', "User $email\n", FILE_APPEND);

    echo 'Done';
}
```

Он чертовски хорошо выполнил свою задачу, но проблема не в его работе, а в том, что переданный код
выглядит очень плохо, потому что в нем:

- Нет возврата осмысленного результата.
- SQL-инъекция (строка вставляется напрямую).
- Нет обработки ошибок.

Если ты передал мусор — метод, который и швец, и жнец, и на дуде игрец — то не удивляйся, что он туда ещё
и трубача припишет. Он **не откажет**, он скажет: «Да, командир!» — и продолжит кромсать.


На сайтах помощи, типа "Stack Overflow" спросить/ответить на вопрос, в ручном режиме от человека.
И там достаточно часто были помеченные как "Решение" ответы заминусованные, где в пояснениях обьясняли что решение может быть и рабочее, но приведет к плачевным последствиям.
Важно отличие второго пилота, в том, что он не скажет какой ваш код пока вы его об этом не попросите, а вы сосредоточены на решении бизнес-проблем.
А большинство разработчиков будут сосредоточены на бизнес-задаче, а не на качестве кода.

Большинство разработчиков именно так и поступают.
Поэтому пилот продолжает путь туда, куда ведёт плохая трасса.



---

Когда мы запускаем LLM не ради рефакторинга, а ради **решения задачи** — будь то баг, фича или интеграция — мы часто
просим его продолжать код, который уже трещит по швам. Мы не останавливаемся и не думаем: «А может, сначала надо *
*починить**, а не долепить?»

И вот тут начинается самое страшное: мы **раздуваем MESS**. И не просто раздуваем, а автоматизируем его рост.

---

>
> Я опасаюсь, что будет генерироваться всё больше кода — даже если на первый взгляд он выглядит качественным. Используя
> такие инструменты, мы реже вникаем в суть, можем вообще не читать код, а просто копировать, вставлять или описывать
> задачи прямо в IDE. Именно поэтому так важно изначально задать максимально высокую планку качества.

---

### Начинай правильно

Поэтому пилот продолжает путь туда, куда ведёт плохая трасса.
И вот тут начинается самое страшное: мы **раздуваем MESS**. И не просто раздуваем, а автоматизируем его рост.

Вот почему так важно начать с сильной позиции. 
С чистого кода, с понятной архитектуры, с ясных методов и простых имён.


Второй пилот не думает за тебя. Он просто пишет.
Хороший код начинается с тебя, не с него!