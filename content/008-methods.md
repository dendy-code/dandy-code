# «Cкажи», или «Cделай»

Метод должен **либо** возвращать результат, **либо** изменять состояние, но не делать это одновременно.

Когда метод и *что-то делает*, и *что-то возвращает* — его становится сложнее понимать, тестировать и переиспользовать.
Вы не уверены: вызов метода был «командой» или «вопросом»?

Пример

```php
// Плохо ❌
public function discount(): float
{
    $this->price -= 10;
    return $this->price;
}
```

Здесь метод изменяет внутреннее состояние и сразу возвращает новое значение.
Поведение становится неочевидным: можно ли его вызвать повторно? Что произойдёт при втором вызове?

Лучше так

```php
// Хорошо ✅

public function discount(): void
{
    $this->price -= 10;
}

public function total(): float
{
    return $this->price;
}
```

Теперь поведение явно разделено: один метод **меняет**, другой **читает**.


> TODO: Переделать на пример с экспортом или чем то похожим. Рассказать, что "А что если ты хочешь просто протестировать данные экспорта — без отправки файла? Или переиспользовать логику в другом месте?" и нужно разделить.

```php
public function export(string $name = 'export')
{
    $data = [
        ['row1:col1', 'row1:col2', 'row1:col3'],
        ['row2:col1', 'row2:col2', 'row2:col3'],
        ['row3:col1', 'row3:col2', 'row3:col3'],
    ];

    return response()->streamDownload(function () use ($data) {
        $csv = fopen('php://output', 'wb');
        fputcsv($csv, ['header:col1', 'header:col2', 'header:col3']);
        foreach ($data as $row) {
            fputcsv($csv, $row);
        }
        fclose($csv);
    }, "$name.csv");
}
```
